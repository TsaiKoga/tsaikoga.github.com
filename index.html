

<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>TsaiKoga Blog</title>
  <meta name="author" content="TsaiKoga">
  <link rel="author" href="humans.txt">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  
    
  
  <meta name="description" content=" ">
  
  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://TsaiKoga.github.com/">
  <link href="/favicon.png" rel="icon">
  <link href='http://fonts.googleapis.com/css?family=Cantarell' rel='stylesheet' type='text/css'>
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="TsaiKoga Blog" type="application/atom+xml">
  <meta name="og:type" content="website" />
  <meta name="og:site_name" content="TsaiKoga Blog" />
  <meta name="og:title" content="TsaiKoga Blog" />
  <meta name="og:description" content=" " />
  <meta name="og:url" content="http://TsaiKoga.github.com/index.html"/>
  <meta name="url" content="http://TsaiKoga.github.com/index.html">
  
  <meta name="distribution" content="global">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-42786505-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <div id="front-wrapper">
  <div id="hero">
    <div id="hero-inner" class="container">
      <div class="span10 offset1">
  <h1>
    TsaiKoga Blog
  </h1>
  <h2>A Chinese Programmer&#8217;s Blog</h2>
</div>

    </div>
  </div>
  <section id="sub-hero">
    <div class="container">
      <div class="row">
  <div class="span4">
    <h2>about me</h2>
<p>A little something about me.</p>

  </div>
  <div class="span6">
    

  </div>
  <div class="span2">
    <h2>found on</h2>














  </div>
</div>

    </div>
  </section>
  <div class="container">
    <div class="row" id="post-container">
    
    
    
      <article class="span4">
        <div class="article-format">

  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/10/22/railsbiao-de-guan-lian/">Rails表的关联</a></h1>
    
    
      <p class="meta">
        
  


  
    <span class="byline author vcard">by <span class="fn">TsaiKoga</span></span>
  

 - 
        








  


<time datetime="2013-10-22T21:47:00+08:00" pubdate data-updated="true">Oct 22<span>nd</span>, 2013</time> - 
        

posted in
<span class="categories">
  
    <a class='category' href='/blog/categories/rails/'>Rails</a>
  
</span>


        
      </p>
    
  </header>


  <div class="entry-content"><p>一段时间没有用到表的关联，回想如何使用时，知识却模糊不清，所以将它记下以便以后查看。
Rails中表的关联主要有三种：单表继承,多态关联,自引用。</p>

<p>个人觉得：</p>

<ul>
<li><p><strong>单表继承</strong>是通过增加<strong>冗余字段</strong>来<strong>减少表的数量</strong>。</p></li>
<li><p><strong>多态关联</strong>是通过建立<strong>虚拟表</strong>来<strong>减少关联数</strong>（belongs_to）和<strong>字段</strong>（外键），方便于以后又有表要关联。</p></li>
<li><p><strong>自引用</strong>也是利用<strong>冗余</strong>而共用<strong>一张表</strong>。</p></li>
</ul>


<p>共同特点：</p>

<blockquote><p>都需要增加type字段，即增加冗余字段。</p></blockquote>

<p>差别：</p>

<blockquote><p>多态可以让子类有自己的行为特征（通过type字段呈现&#8221;多重形态&#8221;）。
单表继承必须拥有共同属性。
自引用必须牺牲一些字段（不需用到的字段的值为null）。</p></blockquote>

<hr />

<h3>详述</h3>

<h4>单表继承：</h4>

<p>一个继承体系<strong>所有类映射到同一张数据库表</strong>，这张表包含<strong>所有类拥有的属性</strong>。记住：所有属性哦，他们可以为null值（:null=>true，即null是可有可无的）。
它通过一个<strong>附加字段type来确认当前记录的对象</strong>属于什么<strong>类型</strong>&mdash;&mdash;ActiveRecord约定。</p>

<p>顾名思义，单表就是一张表，那么怎么呈现多种表的形态呢。当其他表引用它时，可以给予其他名字，但是要声明它实际是那张表(belongs_to :manager, :class_name => &ldquo;Person&rdquo;)，举例：</p>

<p>person.rb:</p>

<pre><code>Class Person &lt; ActiveRecord::Base
        belongs_to XXX
end
</code></pre>

<p>manager.rb:(继承Person类)</p>

<pre><code>Class Manager &lt; Person
end
</code></pre>

<p>rails console:</p>

<pre><code>XXX.first.manager
</code></pre>

<p>mysql:</p>

<pre><code>select people.* from people where people.type in ("Manager") and people.id=1
</code></pre>

<hr />

<h4>多态关联：</h4>

<p>通过建立虚拟表，通过虚拟表（先通过<strong>类型找到关联表</strong>，再通过<strong>外键找到对应的记录</strong>）访问。</p>

<p><strong>举例：</strong></p>

<p>假设我們已经有了Article与Photo这两个Model，然后我们希望这两个Model都可以被留言。不用多态关联的话，你得分別建立ArticleComment和PhotoComment的model。或者一个comment中要有两个外键：article_id和photo_id，虽然用多态也是两个字段，但当表多了就可以看出多态的好处。</p>

<p>现有个场景，有两个model：person和album，需要添加一个图片来做为其头像/封面。添加一个image model，按照以往需要对这几个model做以下关联设置：</p>

<p>没用多态关联前：不复杂，但是麻烦，如果<strong>以后加个book model之类</strong>的，也需要有个图做封面的，那又要<strong>改image model里的关联和migration</strong>了，一点都不DRY。</p>

<pre><code>class Person &lt; ActiveRecord::Base
  has_one :image, :dependent =&gt; :destroy
end

  class Album &lt; ActiveRecord::Base
         has_one :image, :dependent =&gt; :destroy
  end

  class Image &lt; ActiveRecord::Base
     belongs_to :person
         belongs_to :album
end
</code></pre>

<p>相应的image的migration要添加上关联字段：</p>

<pre><code>t.column :person_id, :integer, :null =&gt; false, :default =&gt; 0
    t.column :album_id, :integer, :null =&gt; false, :default =&gt; 0
</code></pre>

<p>使用多态关联后：</p>

<pre><code>    class Person &lt; ActiveRecord::Base
        has_one :image, :as =&gt; :iconable, :dependent =&gt; :destroy
    end
    class Album &lt; ActiveRecord::Base
        has_one :image, :as =&gt; :iconable, :dependent =&gt; :destroy
    end
    class Image &lt; ActiveRecord::Base
        belongs_to :iconable, :polymorphic =&gt; true
    end
</code></pre>

<p>Person和Album有了<strong>共同的一个虚拟的名字</strong>叫做iconable,image表就可以直接用外键iconable_id关联它,</p>

<p><strong>使用方法：</strong></p>

<p>添加：</p>

<pre><code>    @person = Person.new(params[:person])
    @person.build_image(params[:image])
    @person.save
</code></pre>

<p>读取：</p>

<pre><code>    @person.image
</code></pre>

<p>image 的属主：</p>

<pre><code>    @person.iconable
</code></pre>

<hr />

<h4>自引用：</h4>

<p>自引用就是<strong>一条记录可能引用同一张表的另一条记录</strong>：公司员工都有主管，主管也是员工。使用:class_name 和foregin_key加上has_many/has_one和belongs_to.</p>

<pre><code>class Employee &lt; ActiveRecord::Base
    belongs_to :manager,
      :class_name =&gt; "Employee",
      :foregin_key =&gt; "manager_id"
    belongs_to :mentor,
        :class_name =&gt; "Employee",
        :foregin_key =&gt; "mentor_id"
    has_many ：mentored_employees,
      :class_name =&gt; "Employee",
      :foreign_key =&gt; "mentor_id"
    has_many ：managed_employees,
      :class_name =&gt; "Employee",
      :foreign_key =&gt; "manager_id"
end
</code></pre>
</div>
  
  


</div>

      </article>
    
    
      <article class="span4">
        <div class="article-format">

  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/10/22/vimpei-zhi/">Vim配置</a></h1>
    
    
      <p class="meta">
        
  


  
    <span class="byline author vcard">by <span class="fn">TsaiKoga</span></span>
  

 - 
        








  


<time datetime="2013-10-22T14:24:00+08:00" pubdate data-updated="true">Oct 22<span>nd</span>, 2013</time> - 
        

posted in
<span class="categories">
  
    <a class='category' href='/blog/categories/vim/'>vim</a>
  
</span>


        
      </p>
    
  </header>


  <div class="entry-content"><p>说到vim，大家应该都不陌生。它是类似于vi的编辑器，在vi的基础上增加了很多新特性。</p>

<p><img src="/images/posts/2013-10-22/vim.jpg" title="Vim图" alt="图片无法显示" /></p>

<h4>.vimrc配置文件</h4>

<p>以下内容复制到用户目录下的.vimrc文件，可以更改vim配置，使Vim更美观，更好用:</p>

<pre><code>set nocompatible            " 关闭 vi 兼容模式
    syntax on                   " 自动语法高亮
    colorscheme molokai         " 设定配色方案
    set number                  " 显示行号
    set cursorline              " 突出显示当前行
    set ruler                   " 打开状态栏标尺
    set shiftwidth=4            " 设定 &lt;&lt; 和 &gt;&gt; 命令移动时的宽度为 4
    set softtabstop=4           " 使得按退格键时可以一次删掉 4 个空格
    set tabstop=4               " 设定 tab 长度为 4
    set nobackup                " 覆盖文件时不备份
    set autochdir               " 自动切换当前目录为当前文件所在的目录
    filetype plugin indent on   " 开启插件
    set backupcopy=yes          " 设置备份时的行为为覆盖
    set ignorecase smartcase    " 搜索时忽略大小写，但在有一个或以上大写字母时仍保持对大小写敏感
    set nowrapscan              " 禁止在搜索到文件两端时重新搜索
    set incsearch               " 输入搜索内容时就显示搜索结果
    set hlsearch                " 搜索时高亮显示被找到的文本
    set noerrorbells            " 关闭错误信息响铃
    set novisualbell            " 关闭使用可视响铃代替呼叫
    set t_vb=                   " 置空错误铃声的终端代码
    " set showmatch               " 插入括号时，短暂地跳转到匹配的对应括号
    " set matchtime=2             " 短暂跳转到匹配括号的时间
    set magic                   " 设置魔术
    set hidden                  " 允许在有未保存的修改时切换缓冲区，此时的修改由 vim 负责保存
    set guioptions-=T           " 隐藏工具栏  （等号前后不能空格）
    set guioptions-=m           " 隐藏菜单栏
    set smartindent             " 开启新行时使用智能自动缩进
    set backspace=indent,eol,start
                                                            " 不设定在插入状态无法用退格键和 Delete 键删除回车符
    set cmdheight=1             " 设定命令行的行数为 1
    set laststatus=2            " 显示状态栏 (默认值为 1, 无法显示状态栏)
    set statusline=\ %&lt;%F[%1*%M%*%n%R%H]%=\ %y\ %0(%{&amp;fileformat}\ %{&amp;encoding}\ %c:%l/%L%)\ 
                                                            " 设置在状态行显示的信息
    set foldenable              " 开始折叠
    set foldmethod=syntax       " 设置语法折叠

    "窗口分割时,进行切换的按键热键需要连接两次,比如从下方窗口移动
    "光标到上方窗口,需要&lt;c-w&gt;&lt;c-w&gt;k,非常麻烦,现在重映射为&lt;c-k&gt;,切换的
    "时候会变得非常方便.
    nnoremap &lt;C-h&gt; &lt;C-w&gt;h
    nnoremap &lt;C-j&gt; &lt;C-w&gt;j
    nnoremap &lt;C-k&gt; &lt;C-w&gt;k
    nnoremap &lt;C-l&gt; &lt;C-w&gt;l
</code></pre>

<p>接下来是括号补全：</p>

<pre><code>    inoremap (  ()&lt;Esc&gt;i                " inoremap表示输入模式下的匹配,当有"("时，匹配")"并退出重新进入"i编辑模式"
    inoremap [  []&lt;Esc&gt;i
    inoremap {  {}&lt;Esc&gt;i
    autocmd Syntax html,vim inoremap &lt; &lt;lt&gt;&gt;&lt;Esc&gt;i | inoremap &gt; &lt;c-r&gt;=ClosePair('&gt;')&lt;CR&gt;
    inoremap ) &lt;c-r&gt;=ClosePair(')')&lt;CR&gt;
    inoremap ] &lt;c-r&gt;=ClosePair(']')&lt;CR&gt;
    inoremap } &lt;c-r&gt;=CloseBracket()&lt;CR&gt;
    inoremap " &lt;c-r&gt;=QuoteDelim('"')&lt;CR&gt;
    inoremap ' &lt;c-r&gt;=QuoteDelim("'")&lt;CR&gt;

    function ClosePair(char)
        if getline('.')[col('.') - 1] == a:char
            return "\&lt;Right&gt;"
        else
            return a:char
        endif
    endf

    function CloseBracket()
        if match(getline('.' + 1), '\s*}') &lt; 0
            return "\&lt;CR&gt;}"
        else
            return "\&lt;Esc&gt;j0f}a"
        endif
    endf

    function QuoteDelim(char)
        let line = getline('.')
        let col = col('.')
        if line[col-2] == "\\"
            "Inserting a quoted quotation mark into string
            return a:char
        elseif line[col-1] == a:char
            "Escaping out of the string
            return "\&lt;Right&gt;"
        else
            "Starting a String
            return a:char.a:char."\&lt;Esc&gt;i"
        endif
    endf
</code></pre>

<p>下列两款vim插件非常好用，安装完，也必须在.vimrc中添加如下内容：</p>

<pre><code>    "-----------------------------------------------------------------
    " plugin - NERD_tree.vim 以树状方式浏览系统中的文件和目录
    " :ERDtree 打开NERD_tree         :NERDtreeClose    关闭NERD_tree
    " o 打开关闭文件或者目录         t 在标签页中打开
    " T 在后台标签页中打开           ! 执行此文件
    " p 到上层目录                   P 到根目录
    " K 到第一个节点                 J 到最后一个节点
    " u 打开上层目录                 m 显示文件系统菜单（添加、删除、移动操作）
    " r 递归刷新当前目录             R 递归刷新当前根目录
    "-----------------------------------------------------------------
    " F3 NERDTree 切换
    map &lt;F3&gt; :NERDTreeToggle&lt;CR&gt;
    imap &lt;F3&gt; &lt;ESC&gt;:NERDTreeToggle&lt;CR&gt;


    "-----------------------------------------------------------------
    " plugin - NERD_commenter.vim   注释代码用的，
    " [count],cc 光标以下count行逐行添加注释(7,cc)
    " [count],cu 光标以下count行逐行取消注释(7,cu)
    " [count],cm 光标以下count行尝试添加块注释(7,cm)
    " ,cA 在行尾插入 /* */,并且进入插入模式。 这个命令方便写注释。
    " 注：count参数可选，无则默认为选中行或当前行
    "-----------------------------------------------------------------
    let NERDSpaceDelims=1       " 让注释符与语句之间留一个空格
    let NERDCompactSexyComs=1   " 多行注释时样子更好看
</code></pre>

<p><em>感谢使用vim配置，记住要将vim编辑器重启后才生效。</em></p>
</div>
  
  


</div>

      </article>
    
    
      <article class="span4">
        <div class="article-format">

  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/10/22/linuxde-wen-jian-he-mu-lu/">Linux的文件系统</a></h1>
    
    
      <p class="meta">
        
  


  
    <span class="byline author vcard">by <span class="fn">TsaiKoga</span></span>
  

 - 
        








  


<time datetime="2013-10-22T09:49:00+08:00" pubdate data-updated="true">Oct 22<span>nd</span>, 2013</time> - 
        

posted in
<span class="categories">
  
    <a class='category' href='/blog/categories/linux/'>Linux</a>
  
</span>


        
      </p>
    
  </header>


  <div class="entry-content"><hr />

<h3>文件系统：</h3>

<p>我们都知道Linux的文件系统层次结构是一棵树，以&#8221;/&ldquo;表示的为最上层的目录。</p>

<p><strong>example:</strong></p>

<p>Ubuntu文件系统示意图：</p>

<p><img src="/images/posts/2013-10-22/ubuntu_file_system.png" title="Ubuntu文件系统" alt="无法显示图片" /></p>

<hr />

<h4>定义:</h4>

<blockquote><p><strong>文件:</strong> 是文件系统中存储数据的一个命名<strong>对象</strong>。即使是一个<strong>空文件</strong>，它也包含<strong>用户数据</strong>，仍然为操作系统提供其他信息。</p>

<p><strong>目录:</strong> 其中包含许多文件项目的一类<strong>特殊文件</strong>。支持文件系统的层次结构。系统中每个文件都登记在一个目录中。</p>

<p><strong>子目录：</strong> 被包含在另一个目录中的目录。除了root目录以外，所有的目录都是子目录，并且有他们的父目录。<strong>root目录就作为自己的父目录</strong>。</p>

<p><strong>文件名：</strong> 用来标志文件的字符串，保存在一个<strong>目录文件项</strong>中。</p></blockquote>

<hr />

<h4>文件结构：</h4>

<p>文件的成分：无论文件是一个程序，一个文档，一个数据库，还是一个目录，操作系统都会赋予它如下所示的同样的结构：</p>

<ul>
<li><p><strong>文件索引</strong>：又称<strong>I节点</strong>，是文件系统结构中包含<strong>相应文件信息</strong>的<strong>一个记录</strong>。这些信息包括文件权限、文件主、文件大小等。</p></li>
<li><p><strong>数据</strong>： 文件的实际内容，可以是空，可以非常大，并且有自己的结构。</p>

<p>文件名规范：</p>

<blockquote><p>（1）除了写先<strong>（“/”）和空字符（ASCII字符“\0”）</strong>以外，文件名可以包含任意的ASCII字符，因为这两个字符被核心<strong>当作标识路径名的特殊字符</strong>来解释。</p>

<p>（2）Linux<strong>区分大小写</strong>。</p>

<p>（3）以<strong>圆点（.）开头</strong>的文件为<strong>隐含文件</strong>。</p></blockquote></li>
</ul>


<hr />

<h4>文件类型：</h4>

<ul>
<li><strong>普通文件：</strong></li>
</ul>


<p>普通文件也称规范文件，包含<strong>各种长度的字符串</strong>。核心对这些<strong>数据没有进行结构化</strong>，只是作为<strong>有序的字符序列</strong>把它提交给应用程序。应用程序<strong>自己组织和解释</strong>这些数据。</p>

<blockquote><p>(1)<strong>文本文件</strong>：有ASCII字符构成。</p>

<p>(2)<strong>数据文件</strong>：来自<strong>应用程序</strong>的<strong>数字型和文本型数据</strong>组成，例如：电子表格，数据库及字处理文档。</p>

<p>(3)<strong>可执行的二进制文件</strong>：有机器指令和数据构成。</p></blockquote>

<p><em>命令：指定文件的类型（可将多个文件作为参数）</em></p>

<pre><code>$ file 文件名 [文件名...]
</code></pre>

<ul>
<li><strong>目录文件：</strong></li>
</ul>


<p>目录文件也<strong>包含数据</strong>，但与普通文件的差别是：核心对这些数据进行<strong>结构处理</strong>，即它是<strong>有成对的“I节点号/文件名”</strong>构成的<strong>列表</strong>。</p>

<blockquote><ul>
<li><p>I节点号是检索I节点表的下标，<strong>I节点中存放有文件的状态信息</strong>。</p></li>
<li><p>每个目录的<strong>第一项都表示目录本身</strong>，用“点（.）”作文它的文件名，每个目录的<strong>第二项的名字用“点点（..）”表示</strong>。这就是当你输入ls显示第一二项是.和..的原因。</p></li>
<li><p>当文件<strong>添加</strong>到一个目录时，改目录的<strong>尺寸会加大，以便容纳新文件名</strong>。当<strong>删除文件</strong>时，目录的尺寸<strong>并不会减小</strong>，而是核心对<strong>该目录项上做特殊标识</strong>，一边下次添加一个文件时<strong>重新使用</strong>它。ls不会列出这些未被使用的项。</p></li>
</ul>
</blockquote>

<ul>
<li><strong>设备文件</strong></li>
</ul>


<p>是一种特别文件，除了在其文件I节点中存放属性信息外，不包含任何数据。系统利用他们来标记各个设备驱动器，核心使用它们与硬件设备通信。</p>

<blockquote><ul>
<li><p>字符设备：最常用的设备文件，允许I/O传送任意大小的数据，取决于设备本身的容量。使用这种接口的设备：终端，打印机及鼠标。</p></li>
<li><p>块设备：利用核心缓冲区的自动缓存机制。缓存区进行I/O传送总是已KB为单位。使用这种接口的设备包括硬盘，软盘和RAM盘。</p></li>
</ul>
</blockquote>

<p>tty可显示设备文件：</p>

<pre><code>$ tty   #=&gt; /dev/pts/1
</code></pre>

<p><em>注意： 设备文件存放在&#8221;/dev/&ldquo;目录下</em></p>

<hr />

<ul>
<li><strong>符号链接文件：</strong> 存放的<strong>数据</strong>是文件系统<strong>通向文件的路径</strong>。当使用符号链接文件时，核心<strong>自动访问所保存这个路径</strong>。</li>
</ul>

</div>
  
  


</div>

      </article>
    
    
      <article class="span4">
        <div class="article-format">

  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/10/19/shi-yong-hostswen-jian-shang-facebookdeng-wang-zhan/">使用hosts文件上facebook等网站</a></h1>
    
    
      <p class="meta">
        
  


  
    <span class="byline author vcard">by <span class="fn">TsaiKoga</span></span>
  

 - 
        








  


<time datetime="2013-10-19T20:52:00+08:00" pubdate data-updated="true">Oct 19<span>th</span>, 2013</time> - 
        

posted in
<span class="categories">
  
    <a class='category' href='/blog/categories/net/'>net</a>
  
</span>


        
      </p>
    
  </header>


  <div class="entry-content"><h3>原因：</h3>

<p>  hosts文件是<strong>本地域名解析文件</strong>,</p>

<blockquote><ul>
<li>系统在访问互联网时先在本机hosts文件中查找对应的<strong>域名解析</strong>（即把你输入的域名变成对应服务器IP地址），</li>
<li>如果没有再去相应的dns服务器查找，网通，电信的dns服务器可能屏蔽facebook等网站的解析，</li>
<li>在本地添加facebook等的记录就能不用<em>外网dns解析</em>，直接在本地解析。</li>
</ul>
</blockquote>

<h3>操作步骤：</h3>

<p>Ubuntu系统的Hosts只需修改/etc/hosts文件，在目录中还有一个hosts.conf文件，但我们需要修改hosts。修改完之后要重启网络。</p>

<ol>
<li><p><strong>修改hosts</strong></p>

<pre><code> sudo vim /etc/hosts
</code></pre></li>
<li><p><strong>添加解析记录（.）</strong></p>

<pre><code>   完整案例：127.0.0.1 localhost.localdomain localhost
   简洁记录：127.0.0.1 localhost
</code></pre></li>
<li><p><strong>保存后重启网络</strong></p>

<pre><code> sudo /etc/init.d/networking restart
</code></pre></li>
</ol>


<h3>这里有份hosts文件供参考：</h3>

<blockquote><p>window hosts文件位置: C盘/windows/system32/drivers/ect
Ubuntu hosts文件位置: /etc/hosts
需要管理员权限,把以下内容复制至hosts文件</p></blockquote>

<pre><code>    127.0.0.1 localhost
    #Google Services START
    203.208.46.200    0.docs.google.com
    203.208.46.200    0.drive.google.com
    203.208.46.200    1.docs.google.com
    203.208.46.200    1.drive.google.com
    203.208.46.200    10.docs.google.com
    203.208.46.200    10.drive.google.com
    203.208.46.200    11.docs.google.com
    203.208.46.200    11.drive.google.com
    203.208.46.200    12.docs.google.com
    203.208.46.200    12.drive.google.com
    203.208.46.200    13.docs.google.com
    203.208.46.200    13.drive.google.com
    203.208.46.200    14.docs.google.com
    203.208.46.200    14.drive.google.com
    203.208.46.200    15.docs.google.com
    203.208.46.200    15.drive.google.com
    203.208.46.200    16.docs.google.com
    203.208.46.200    16.drive.google.com
    203.208.46.200    2.docs.google.com
    203.208.46.200    2.drive.google.com
    203.208.46.200    3.docs.google.com
    203.208.46.200    3.drive.google.com
    203.208.46.200    4.docs.google.com
    203.208.46.200    4.drive.google.com
    203.208.46.200    5.docs.google.com
    203.208.46.200    5.drive.google.com
    203.208.46.200    6.docs.google.com
    203.208.46.200    6.drive.google.com
    203.208.46.200    7.docs.google.com
    203.208.46.200    7.drive.google.com
    203.208.46.200    8.docs.google.com
    203.208.46.200    8.drive.google.com
    203.208.46.200    9.docs.google.com
    203.208.46.200    9.drive.google.com
    203.208.46.200    accounts.google.com
    203.208.46.200    accounts.l.google.com
    203.208.46.200    answers.google.com
    203.208.46.200    apis.google.com
    203.208.46.200    appengine.google.com
    203.208.46.200    apps.google.com
    203.208.46.200    appspot.l.google.com
    203.208.46.200    bks0.books.google.com
    203.208.46.200    bks1.books.google.com
    203.208.46.200    bks10.books.google.com
    203.208.46.200    bks2.books.google.com
    203.208.46.200    bks3.books.google.com
    203.208.46.200    bks4.books.google.com
    203.208.46.200    bks5.books.google.com
    203.208.46.200    bks6.books.google.com
    203.208.46.200    bks7.books.google.com
    203.208.46.200    bks8.books.google.com
    203.208.46.200    bks9.books.google.com
    203.208.46.200    blogsearch.google.com
    203.208.46.200    books.google.com
    203.208.46.200    browserchannel-docs.l.google.com
    203.208.46.200    browserchannel-spreadsheets.l.google.com
    203.208.46.200    browsersync.google.com
    203.208.46.200    browsersync.l.google.com
    203.208.46.200    buzz.google.com
    203.208.46.200    cache.l.google.com
    203.208.46.200    cache.pack.google.com
    203.208.46.200    calendar.google.com
    203.208.46.200    cbk0.google.com
    203.208.46.200    cbk1.google.com
    203.208.46.200    cbk2.google.com
    203.208.46.200    cbk3.google.com
    203.208.46.200    cbks0.google.com
    203.208.46.200    cbks1.google.com
    203.208.46.200    cbks2.google.com
    203.208.46.200    cbks3.google.com
    203.208.46.200    chart.apis.google.com
    203.208.46.221    chatenabled.mail.google.com
    203.208.46.200    checkout.google.com
    203.208.46.200    checkout.l.google.com
    203.208.46.200    chrome.google.com
    203.208.46.200    clients.l.google.com
    203.208.46.200    clients1.google.com
    203.208.46.200    clients2.google.com
    203.208.46.200    clients3.google.com
    203.208.46.200    clients4.google.com
    203.208.46.200    clients5.google.com
    203.208.46.200    clients6.google.com
    203.208.46.200    clients7.google.com
    203.208.46.200    code.google.com
    203.208.46.200    code.l.google.com
    203.208.46.200    csi.l.google.com
    203.208.46.200    desktop.google.com
    203.208.46.200    desktop.l.google.com
    203.208.46.200    desktop2.google.com
    203.208.46.200    developers.google.com
    203.208.46.200    ditu.google.com
    203.208.46.200    dl.google.com
    203.208.46.200    dl.l.google.com
    203.208.46.200    dl-ssl.google.com
    203.208.46.200    docs.google.com
    203.208.46.200    docs0.google.com
    203.208.46.200    docs1.google.com
    203.208.46.200    docs2.google.com
    203.208.46.200    docs3.google.com
    203.208.46.200    docs4.google.com
    203.208.46.200    docs5.google.com
    203.208.46.200    docs6.google.com
    203.208.46.200    docs7.google.com
    203.208.46.200    docs8.google.com
    203.208.46.200    docs9.google.com
    203.208.46.200    drive.google.com
    203.208.46.200    drive0.google.com
    203.208.46.200    drive1.google.com
    203.208.46.200    drive2.google.com
    203.208.46.200    drive3.google.com
    203.208.46.200    drive4.google.com
    203.208.46.200    drive5.google.com
    203.208.46.200    drive6.google.com
    203.208.46.200    drive7.google.com
    203.208.46.200    drive8.google.com
    203.208.46.200    drive9.google.com
    203.208.46.200    earth.google.com
    203.208.46.200    encrypted.google.com
    203.208.46.200    encrypted-tbn.l.google.com
    203.208.46.200    encrypted-tbn0.google.com
    203.208.46.200    encrypted-tbn1.google.com
    203.208.46.200    encrypted-tbn2.google.com
    203.208.46.200    encrypted-tbn3.google.com
    203.208.46.200    feedburner.google.com
    203.208.46.200    feedproxy.google.com
    203.208.46.221    filetransferenabled.mail.google.com
    203.208.46.200    finance.google.com
    203.208.46.200    fusion.google.com
    203.208.46.200    geoauth.google.com
    203.208.46.200    gg.google.com
    203.208.46.200    ghs.google.com
    203.208.46.200    ghs.l.google.com
    203.208.46.200    ghs46.google.com
    203.208.46.200    ghs46.l.google.com
    203.208.46.200    google.com
    203.208.46.200    googleapis.l.google.com
    203.208.46.200    googleapis-ajax.google.com
    203.208.46.200    googleapis-ajax.l.google.com
    203.208.46.200    googlecode.l.google.com
    203.208.46.200    google-public-dns-a.google.com
    203.208.46.200    google-public-dns-b.google.com
    203.208.46.200    goto.google.com
    203.208.46.200    groups.google.com
    203.208.46.200    groups.l.google.com
    203.208.46.200    groups-beta.google.com
    203.208.46.200    gxc.google.com
    203.208.46.200    id.google.com
    203.208.46.200    id.l.google.com
    203.208.46.200    images.google.com
    203.208.46.200    images.l.google.com
    203.208.46.200    investor.google.com
    203.208.46.200    jmt0.google.com
    203.208.46.200    kh.google.com
    203.208.46.200    kh.l.google.com
    203.208.46.200    khm.google.com
    203.208.46.200    khm.l.google.com
    203.208.46.200    khm0.google.com
    203.208.46.200    khm1.google.com
    203.208.46.200    khm2.google.com
    203.208.46.200    khm3.google.com
    203.208.46.200    khmdb.google.com
    203.208.46.200    khms.google.com
    203.208.46.200    khms.l.google.com
    203.208.46.200    khms0.google.com
    203.208.46.200    khms1.google.com
    203.208.46.200    khms2.google.com
    203.208.46.200    khms3.google.com
    203.208.46.200    labs.google.com
    203.208.46.200    large-uploads.l.google.com
    203.208.46.200    lh2.google.com
    203.208.46.200    lh2.l.google.com
    203.208.46.200    lh3.google.com
    203.208.46.200    lh4.google.com
    203.208.46.200    lh5.google.com
    203.208.46.200    lh6.google.com
    203.208.46.200    linkhelp.clients.google.com
    203.208.46.200    local.google.com
    203.208.46.200    m.google.com
    203.208.46.213    mail.google.com
    203.208.46.200    map.google.com
    203.208.46.200    maps.google.com
    203.208.46.200    maps.l.google.com
    203.208.46.200    maps-api-ssl.google.com
    203.208.46.200    mars.google.com
    203.208.46.200    mobile.l.google.com
    203.208.46.200    mobile-gtalk.l.google.com
    203.208.46.200    mobilemaps.clients.google.com
    203.208.46.200    mt.google.com
    203.208.46.200    mt.l.google.com
    203.208.46.200    mt0.google.com
    203.208.46.200    mt1.google.com
    203.208.46.200    mt2.google.com
    203.208.46.200    mt3.google.com
    #203.208.46.200   mtalk.google.com
    203.208.46.200    mts.google.com
    203.208.46.200    mts.l.google.com
    203.208.46.200    mts0.google.com
    203.208.46.200    mts1.google.com
    203.208.46.200    mts2.google.com
    203.208.46.200    mts3.google.com
    203.208.46.200    music.google.com
    203.208.46.200    music-streaming.l.google.com
    203.208.46.200    mw1.google.com
    203.208.46.200    mw2.google.com
    203.208.46.200    news.google.com
    203.208.46.200    news.l.google.com
    203.208.46.200    pack.google.com
    203.208.46.200    photos.google.com
    203.208.46.200    photos-ugc.l.google.com
    203.208.46.200    picasa.google.com
    203.208.46.200    picasaweb.google.com
    203.208.46.200    picasaweb.l.google.com
    203.208.46.200    places.google.com
    203.208.46.200    play.google.com
    203.208.46.200    productforums.google.com
    203.208.46.200    profiles.google.com
    203.208.46.200    reader.google.com
    203.208.46.200    safebrowsing.cache.l.google.com
    203.208.46.200    safebrowsing.clients.google.com
    203.208.46.200    safebrowsing.google.com
    203.208.46.200    safebrowsing-cache.google.com
    203.208.46.200    sandbox.google.com
    203.208.46.200    sb.google.com
    203.208.46.200    sb.l.google.com
    203.208.46.200    sb-ssl.google.com
    203.208.46.200    sb-ssl.l.google.com
    203.208.46.200    scholar.google.com
    203.208.46.200    scholar.l.google.com
    203.208.46.200    script.google.com
    203.208.46.200    services.google.com
    203.208.46.200    sites.google.com
    203.208.46.200    sketchup.google.com
    203.208.46.200    sketchup.l.google.com
    203.208.46.200    spreadsheet.google.com
    203.208.46.200    spreadsheets.google.com
    203.208.46.200    spreadsheets.l.google.com
    203.208.46.200    spreadsheets0.google.com
    203.208.46.200    spreadsheets1.google.com
    203.208.46.200    spreadsheets2.google.com
    203.208.46.200    spreadsheets3.google.com
    203.208.46.200    spreadsheets4.google.com
    203.208.46.200    spreadsheets5.google.com
    203.208.46.200    spreadsheets6.google.com
    203.208.46.200    spreadsheets7.google.com
    203.208.46.200    spreadsheets8.google.com
    203.208.46.200    spreadsheets9.google.com
    203.208.46.200    spreadsheets-china.l.google.com
    203.208.46.200    suggestqueries.google.com
    203.208.46.200    suggestqueries.l.google.com
    203.208.46.200    support.google.com
    173.194.70.125    talk.google.com
    203.208.46.200    talkgadget.google.com
    203.208.46.200    tbn0.google.com
    203.208.46.200    tbn1.google.com
    203.208.46.200    tbn2.google.com
    203.208.46.200    tbn3.google.com
    203.208.46.200    toolbar.google.com
    203.208.46.200    toolbarqueries.clients.google.com
    203.208.46.200    toolbarqueries.google.com
    203.208.46.200    toolbarqueries.l.google.com
    203.208.46.200    tools.google.com
    203.208.46.200    tools.l.google.com
    203.208.46.200    translate.google.com
    203.208.46.200    trends.google.com
    203.208.46.200    upload.docs.google.com
    203.208.46.200    upload.drive.google.com
    203.208.46.200    uploads.code.google.com
    203.208.46.200    uploadsj.clients.google.com
    203.208.46.200    v3.cache1.c.docs.google.com
    203.208.46.200    video.google.com
    203.208.46.200    video-stats.l.google.com
    203.208.46.200    voice.google.com
    203.208.46.200    wallet.google.com
    203.208.46.200    wifi.google.com
    203.208.46.200    wifi.l.google.com
    203.208.46.200    wire.l.google.com
    203.208.46.200    writely.google.com
    203.208.46.200    writely.l.google.com
    203.208.46.200    writely-china.l.google.com
    203.208.46.200    writely-com.l.google.com
    203.208.46.200    www.google.com
    203.208.46.200    www.l.google.com
    203.208.46.200    www2.l.google.com
    203.208.46.200    www3.l.google.com
    203.208.46.200    www4.l.google.com
    203.208.46.200    ytstatic.l.google.com
    203.208.46.202    0-open-opensocial.googleusercontent.com
    203.208.46.202    0-focus-opensocial.googleusercontent.com
    203.208.46.202    1-focus-opensocial.googleusercontent.com
    203.208.46.202    1-open-opensocial.googleusercontent.com
    203.208.46.202    1-ps.googleusercontent.com
    203.208.46.202    2-focus-opensocial.googleusercontent.com
    203.208.46.202    2-open-opensocial.googleusercontent.com
    203.208.46.202    2-ps.googleusercontent.com
    203.208.46.202    3-focus-opensocial.googleusercontent.com
    203.208.46.202    3-ps.googleusercontent.com
    203.208.46.202    3hdrrlnlknhi77nrmsjnjr152ueo3soc-a-calendar-opensocial.googleusercontent.com
    203.208.46.202    3-open-opensocial.googleusercontent.com
    203.208.46.202    4-ps.googleusercontent.com
    203.208.46.202    4fjvqid3r3oq66t548clrdj52df15coc-a-oz-opensocial.googleusercontent.com
    203.208.46.202    53rd6p0catml6vat6qra84rs0del836d-a-oz-opensocial.googleusercontent.com
    203.208.46.202    59cbv4l9s05pbaks9v77vc3mengeqors-a-oz-opensocial.googleusercontent.com
    203.208.46.202    8kubpeu8314p2efdd7jlv09an9i2ljdo-a-oz-opensocial.googleusercontent.com
    203.208.46.202    adstvca8k2ooaknjjmv89j22n9t676ve-a-oz-opensocial.googleusercontent.com
    203.208.46.202    a-oz-opensocial.googleusercontent.com
    203.208.46.202    blogger.googleusercontent.com
    203.208.46.202    bt26mravu2qpe56n8gnmjnpv2inl84bf-a-oz-opensocial.googleusercontent.com
    203.208.46.202    clients1.googleusercontent.com
    203.208.46.202    clients2.googleusercontent.com
    203.208.46.202    clients3.googleusercontent.com
    203.208.46.202    clients4.googleusercontent.com
    203.208.46.202    clients5.googleusercontent.com
    203.208.46.202    clients6.googleusercontent.com
    203.208.46.202    clients7.googleusercontent.com
    203.208.46.202    code-opensocial.googleusercontent.com
    203.208.46.202    debh8vg7vd93bco3prdajidmm7dhql3f-a-oz-opensocial.googleusercontent.com
    203.208.46.202    doc-00-7o-docs.googleusercontent.com
    203.208.46.202    doc-08-7o-docs.googleusercontent.com
    203.208.46.202    doc-0c-7o-docs.googleusercontent.com
    203.208.46.202    doc-0g-7o-docs.googleusercontent.com
    203.208.46.202    doc-0s-7o-docs.googleusercontent.com
    203.208.46.202    doc-10-7o-docs.googleusercontent.com
    203.208.46.202    doc-14-7o-docs.googleusercontent.com
    203.208.46.202    feedback.googleusercontent.com
    203.208.46.202    googlehosted.l.googleusercontent.com
    203.208.46.202    gp0.googleusercontent.com
    203.208.46.202    gp1.googleusercontent.com
    203.208.46.202    gp2.googleusercontent.com
    203.208.46.202    gp3.googleusercontent.com
    203.208.46.202    gp4.googleusercontent.com
    203.208.46.202    gp5.googleusercontent.com
    203.208.46.202    gp6.googleusercontent.com
    203.208.46.202    hsco54a20sh11q9jkmb51ad2n3hmkmrg-a-oz-opensocial.googleusercontent.com
    203.208.46.202    i8brh95qor6r54nkl52hidj2ggcs4jgm-a-oz-opensocial.googleusercontent.com
    203.208.46.202    images1-focus-opensocial.googleusercontent.com
    203.208.46.202    images2-focus-opensocial.googleusercontent.com
    203.208.46.202    images3-focus-opensocial.googleusercontent.com
    203.208.46.202    images4-focus-opensocial.googleusercontent.com
    203.208.46.202    images5-focus-opensocial.googleusercontent.com
    203.208.46.202    images6-focus-opensocial.googleusercontent.com
    203.208.46.202    images7-focus-opensocial.googleusercontent.com
    203.208.46.202    images8-focus-opensocial.googleusercontent.com
    203.208.46.202    images9-focus-opensocial.googleusercontent.com
    203.208.46.202    images-docs-opensocial.googleusercontent.com
    203.208.46.202    images-oz-opensocial.googleusercontent.com
    203.208.46.202    k6v18tjr24doa89b55o3na41kn4v73eb-a-oz-opensocial.googleusercontent.com
    203.208.46.202    lh1.googleusercontent.com
    203.208.46.202    lh2.googleusercontent.com
    203.208.46.202    lh3.googleusercontent.com
    203.208.46.202    lh4.googleusercontent.com
    203.208.46.202    lh5.googleusercontent.com
    203.208.46.202    lh6.googleusercontent.com
    203.208.46.202    mail-attachment.googleusercontent.com
    203.208.46.202    music.googleusercontent.com
    203.208.46.202    music-onebox.googleusercontent.com
    203.208.46.202    oauth.googleusercontent.com
    203.208.46.202    ob7f2qc0i50kbjnc81vkhgmb5hsv7a8l-a-oz-opensocial.googleusercontent.com
    203.208.46.202    ode25pfjgmvpquh3b1oqo31ti5ibg5fr-a-calendar.opensocial.googleusercontent.com
    203.208.46.202    qhie5b8u979rnch1q0hqbrmbkn9estf7-a-oz-opensocial.googleusercontent.com
    203.208.46.202    r70rmsn4s0rhk6cehcbbcbfbs31pu0va-a-oz-opensocial.googleusercontent.com
    203.208.46.202    rbjhe237k979f79d87gmenp3gejfonu9-a-oz-opensocial.googleusercontent.com
    203.208.46.202    s1.googleusercontent.com
    203.208.46.202    s2.googleusercontent.com
    203.208.46.202    s3.googleusercontent.com
    203.208.46.202    s4.googleusercontent.com
    203.208.46.202    s5.googleusercontent.com
    203.208.46.202    s6.googleusercontent.com
    203.208.46.202    spreadsheets-opensocial.googleusercontent.com
    203.208.46.202    static.googleusercontent.com
    203.208.46.202    t.doc-0-0-sj.sj.googleusercontent.com
    203.208.46.202    themes.googleusercontent.com
    203.208.46.202    translate.googleusercontent.com
    203.208.46.202    u807isd5egseeabjccgcns005p2miucq-a-oz-opensocial.googleusercontent.com
    203.208.46.202    upt14k1i2veesusrda9nfotcrbp9d7p5-a-oz-opensocial.googleusercontent.com
    203.208.46.202    webcache.googleusercontent.com
    203.208.46.202    www.googleusercontent.com
    203.208.46.202    www-calendar-opensocial.googleusercontent.com
    203.208.46.202    www-fc-opensocial.googleusercontent.com
    203.208.46.202    www-focus-opensocial.googleusercontent.com
    203.208.46.202    www-gm-opensocial.googleusercontent.com
    203.208.46.202    www-kix-opensocial.googleusercontent.com
    203.208.46.202    www-open-opensocial.googleusercontent.com
    203.208.46.202    www-opensocial.googleusercontent.com
    203.208.46.202    www-opensocial-sandbox.googleusercontent.com
    203.208.46.202    www-oz-opensocial.googleusercontent.com
    203.208.46.207    csi.gstatic.com
    203.208.46.207    g0.gstatic.com
    203.208.46.207    g1.gstatic.com
    203.208.46.207    g2.gstatic.com
    203.208.46.207    g3.gstatic.com
    203.208.46.207    maps.gstatic.com
    203.208.46.207    mt0.gstatic.com
    203.208.46.207    mt1.gstatic.com
    203.208.46.207    mt2.gstatic.com
    203.208.46.207    mt3.gstatic.com
    203.208.46.207    mt4.gstatic.com
    203.208.46.207    mt5.gstatic.com
    203.208.46.207    mt6.gstatic.com
    203.208.46.207    mt7.gstatic.com
    203.208.46.207    ssl.gstatic.com
    203.208.46.207    t0.gstatic.com
    203.208.46.207    t1.gstatic.com
    203.208.46.207    t2.gstatic.com
    203.208.46.207    t3.gstatic.com
    203.208.46.207    www.gstatic.com
    203.208.46.170    lh1.ggpht.com
    203.208.46.170    lh2.ggpht.com
    203.208.46.170    lh3.ggpht.com
    203.208.46.170    lh4.ggpht.com
    203.208.46.170    lh5.ggpht.com
    203.208.46.170    lh6.ggpht.com
    203.208.46.170    nt0.ggpht.com
    203.208.46.170    nt1.ggpht.com
    203.208.46.170    nt2.ggpht.com
    203.208.46.170    nt3.ggpht.com
    203.208.46.170    nt4.ggpht.com
    203.208.46.170    nt5.ggpht.com
    203.208.46.200    appspot.com
    173.194.64.141    chrometophone.appspot.com
    203.208.46.200    evolutionofweb.appspot.com
    203.208.46.200    googcloudlabs.appspot.com
    203.208.46.200    gv-gadget.appspot.com
    203.208.46.200    magnifier.blogspot.com
    203.208.46.200    moderator.appspot.com
    203.208.46.200    newsfeed-dot-latest-dot-rovio-ad-engine.appspot.com
    203.208.46.200    productideas.appspot.com
    203.208.46.200    project-slingshot-gp.appspot.com
    203.208.46.200    r2303.latest.project-slingshot-hr.appspot.com
    203.208.46.200    r3085-dot-latest-dot-project-slingshot-gp.appspot.com
    203.208.46.200    r3091-dot-latest-dot-project-slingshot-gp.appspot.com
    203.208.46.200    r3101-dot-latest-dot-project-slingshot-gp.appspot.com
    203.208.46.200    r3269-dot-latest-dot-project-slingshot-gp.appspot.com
    203.208.46.200    r3432-dot-latest-dot-project-slingshot-hr.appspot.com
    203.208.46.200    r4681-dot-latest-dot-project-slingshot-hr.appspot.com
    203.208.46.170    r7647-dot-latest-dot-project-slingshot-hr.appspot.com
    203.208.46.200    wcproxyx.appspot.com
    203.208.46.200    www.appspot.com
    203.208.46.200    ajax.googleapis.com
    203.208.46.200    chart.googleapis.com
    203.208.46.200    fonts.googleapis.com
    203.208.46.200    maps.googleapis.com
    203.208.46.200    mt0.googleapis.com
    203.208.46.200    mt1.googleapis.com
    203.208.46.200    mt2.googleapis.com
    203.208.46.200    mt3.googleapis.com
    203.208.46.200    redirector-bigcache.googleapis.com
    203.208.46.200    translate.googleapis.com
    173.194.66.95 www.googleapis.com
    203.208.46.200    autoproxy-gfwlist.googlecode.com
    203.208.46.200    chromium.googlecode.com
    203.208.46.200    closure-library.googlecode.com
    203.208.46.200    earth-api-samples.googlecode.com
    203.208.46.200    gmaps-samples-flash.googlecode.com
    203.208.46.200    google-code-feed-gadget.googlecode.com
    203.208.46.200    blogsearch.google.cn
    203.208.46.200    ditu.google.cn
    203.208.46.200    gg.google.cn
    203.208.46.200    id.google.cn
    203.208.46.200    maps.gstatic.cn
    203.208.46.200    m.google.cn
    203.208.46.200    mt.google.cn
    203.208.46.200    mt0.google.cn
    203.208.46.200    mt1.google.cn
    203.208.46.200    mt2.google.cn
    203.208.46.200    mt3.google.cn
    203.208.46.200    news.google.cn
    203.208.46.200    scholar.google.cn
    203.208.46.200    translate.google.cn
    203.208.46.200    www.google.cn
    203.208.46.200    www.gstatic.cn
    203.208.46.200    accounts.google.com.hk
    203.208.46.200    blogsearch.google.com.hk
    203.208.46.200    books.google.com.hk
    203.208.46.200    clients1.google.com.hk
    203.208.46.200    desktop.google.com.hk
    203.208.46.200    encrypted.google.com.hk
    203.208.46.200    groups.google.com.hk
    203.208.46.200    gxc.google.com.hk
    203.208.46.200    id.google.com.hk
    203.208.46.200    images.google.com.hk
    203.208.46.200    m.google.com.hk
    203.208.46.200    maps.google.com.hk
    203.208.46.200    news.google.com.hk
    203.208.46.200    picasaweb.google.com.hk
    203.208.46.200    plus.url.google.com.hk
    203.208.46.200    scholar.google.com.hk
    203.208.46.200    toolbar.google.com.hk
    203.208.46.200    toolbarqueries.google.com.hk
    203.208.46.200    translate.google.com.hk
    203.208.46.200    translate.google.com.hk
    203.208.46.200    wenda.google.com.hk
    203.208.46.200    www.google.com.hk
    203.208.46.200    accounts.blogger.com
    203.208.46.200    android.googlesource.com
    203.208.46.200    auth.keyhole.com
    203.208.46.200    chrome.angrybirds.com
    203.208.46.200    developer.android.com
    203.208.46.200    domains.googlesyndication.com
    203.208.46.200    earthengine.googlelabs.com
    203.208.46.200    feeds.feedburner.com
    203.208.46.200    g.co
    203.208.46.200    goo.gl
    203.208.46.162    listen.googlelabs.com
    203.208.46.200    m.googlemail.com
    203.208.46.200    market.android.com
    203.208.46.163    ngrams.googlelabs.com
    173.194.37.99 panoramio.com
    203.208.46.222    smarthosts.googlecode.com
    203.208.46.222    ssl.google-analytics.com
    173.194.76.128    static.panoramio.com
    203.208.46.200    www.blogger.com
    203.208.46.200    www.googleadservices.com
    203.208.46.222    www.google-analytics.com
    203.208.46.200    www.googlelabs.com
    203.208.46.222    www.googlesource.com
    173.194.37.99 www.panoramio.com
    203.208.46.200    plus.google.com
    203.208.46.200    plus.url.google.com
    203.208.46.200    plusone.google.com
    #Google Services END
    #Facebook Start
    173.252.112.28    api-read.facebook.com
    173.252.112.28    api.facebook.com
    173.252.112.28    apps.facebook.com
    61.213.189.98 b.static.ak.facebook.com
    61.213.189.120    b.static.ak.fbcdn.net
    66.220.145.63 bigzipfiles.facebook.com
    61.213.189.113    creative.ak.fbcdn.net
    66.152.103.74 external.ak.fbcdn.net
    66.220.149.88 c.facebook.com
    69.171.227.26 chat.facebook.com
    66.220.147.96 check4.facebook.com
    184.31.111.139    connect.facebook.net
    69.171.227.19 creativeupload.facebook.com
    69.171.240.99 d.facebook.com
    173.252.100.17    developers.facebook.com
    66.220.149.90 error.facebook.com
    173.252.100.18    facebook.com
    61.213.189.113    fbcdn.net
    64.213.102.26 fbcdn-profile-a.akamaihd.net
    173.223.232.67    fbcdn-sphotos-a.akamaihd.net
    173.252.112.28    graph.facebook.com
    66.220.151.33 hphotos-ak-snc1.facebook.com
    66.220.151.33 hphotos-ak-snc3.facebook.com
    69.171.240.10 hphotos-ash4.fbcdn.net
    69.63.183.200 hphotos-pao1.fbcdn.net
    66.220.151.33 hphotos-snc1.fbcdn.net
    66.220.151.32 hphotos-snc3.fbcdn.net
    66.220.151.22 hphotos-snc6.fbcdn.net
    69.171.227.24 hphotos-snc7.fbcdn.net
    66.220.144.43 ldap.thefacebook.com
    173.252.100.25    m.facebook.com
    66.220.149.96 o.facebook.com
    173.252.112.28    orcart.facebook.com
    69.171.245.18 photos-ak-ash1.facebook.com
    69.171.245.18 photos-ash1.facebook.com
    66.220.149.90 pixel.facebook.com
    118.214.190.105   profile.ak.facebook.com
    61.213.189.114    profile.ak.fbcdn.net
    69.171.247.22 s-static.facebook.com
    61.213.189.113    s-hprofile-sf2p.fbcdn.net
    184.26.194.110    s-static.ak.facebook.com
    23.5.157.177  s-static.ak.fbcdn.net
    69.171.227.30 secure-media.facebook.com
    69.171.227.30 secure-media.fbcdn.net
    66.220.149.96 ssl.facebook.com
    69.171.247.38 ssl.connect.facebook.com
    69.63.189.76  star.facebook.com
    61.213.189.98 static.ak.facebook.com
    65.32.34.136  static.ak.fbcdn.net
    69.171.229.17 upload.facebook.com
    66.220.144.41 vpn.tfbnw.net
    120.29.145.50 vthumb.ak.fbcdn.net
    66.220.151.31 vupload.facebook.com
    69.171.225.31 www.connect.facebook.com
    173.252.112.28    www.facebook.com
    173.252.112.28    zh-CN.facebook.com
    #Facebook End
    #Flickr START
    98.136.43.76  geo.yahoo.com
    68.142.250.161    l.yimg.com
    96.6.93.227   s.yimg.com
    98.137.88.88  d.yimg.com
    68.142.196.57 c5.ah.yahoo.com
    124.108.120.124   sa.edit.yahoo.com
    66.163.168.247    open.login.yahoo.com
    124.108.97.193    login.yahoo.com
    209.191.92.115    edit.yahoo.com
    209.191.121.31    up.flickr.com
    209.191.105.102   adjax.flickr.yahoo.com
    204.0.5.35    content.yieldmanager.edgesuite.net
    204.0.5.34    us.js2.yimg.com
    #data from HostsX
    68.142.214.24 flickr.com
    66.196.66.157 www.flickr.com
    68.142.214.43 static.flickr.com
    77.238.160.184    static.flickr.com
    209.191.105.102   adjax.flickr.yahoo.com
    68.142.214.43 farm1.staticflickr.com
    68.142.214.43 mud.farm1.staticflickr.com
    69.147.90.159 farm2.staticflickr.com
    69.147.90.159 sp1.farm2.staticflickr.com
    77.238.160.184    farm3.staticflickr.com
    98.137.205.236    bf1.farm3.staticflickr.com
    216.39.54.34  gq1.farm3.staticflickr.com
    69.147.90.215 sp1.farm3.staticflickr.com
    76.13.18.77   farm4.staticflickr.com
    76.13.18.77   ac4.farm4.staticflickr.com
    67.195.19.62  gq1.farm4.staticflickr.com
    76.13.18.79   farm5.staticflickr.com
    67.195.19.65  gq1.farm5.staticflickr.com
    98.136.171.208    farm6.staticflickr.com
    98.139.21.45  bf1.farm6.staticflickr.com
    98.136.171.208    gq1.farm6.staticflickr.com
    98.138.250.88 farm7.staticflickr.com
    98.139.235.135    bf1.farm7.staticflickr.com
    98.138.250.88 ne1.farm7.staticflickr.com
    #Flickr END
    #Twitter START
    199.16.156.18 twitter.com
    199.16.156.18 mobile.twitter.com
    199.16.156.18 api.twitter.com
    199.16.156.47 pic.twitter.com
    199.59.148.136    stream.twitter.com
    199.59.148.137    sitestream.twitter.com
    199.59.148.135    betastream.twitter.com
    199.59.148.148    upload.twitter.com
    199.59.149.137    dev.twitter.com
    199.59.149.91 pay.twitter.com
    199.59.148.149    urls-real.api.twitter.com
    199.16.156.81 userstream.twitter.com
    199.16.156.12 support.twitter.com
    #199.59.148.210   t.co
    69.58.188.34  bitly.com
    208.87.33.151 api.mobilepicture.com
    199.59.148.16 a0.twimg.com
    199.59.148.16 a1.twimg.com
    199.59.148.16 p.twimg.com
    184.169.75.33 si0.twimg.com
    184.169.75.33 si1.twimg.com
    184.169.75.33 si2.twimg.com
    184.169.75.33 si3.twimg.com
    184.169.75.33 si4.twimg.com
    184.169.75.33 si5.twimg.com
    199.16.156.77 image-proxy-origin.twimg.com
    209.17.70.144 oi40.tinypic.com
    209.17.70.143 oi41.tinypic.com
    209.17.70.143 oi42.tinypic.com
    209.17.70.143 oi43.tinypic.com
    209.17.70.143 oi44.tinypic.com
    209.17.70.143 oi45.tinypic.com
    209.17.70.143 oi46.tinypic.com
    209.17.70.143 oi47.tinypic.com
    209.17.70.143 oi48.tinypic.com
    209.17.70.143 oi49.tinypic.com
    209.17.70.143 oi50.tinypic.com
    209.17.70.144 oi51.tinypic.com
    209.17.70.144 oi52.tinypic.com
    209.17.70.144 oi53.tinypic.com
    209.17.70.144 oi54.tinypic.com
    209.17.70.144 oi55.tinypic.com
    209.17.70.144 oi56.tinypic.com
    50.97.168.42  web1.twitpic.com
    50.23.200.233 web10.twitpic.com
    50.97.168.43  web2.twitpic.com
    50.97.168.43  web3.twitpic.com
    50.97.168.40  web4.twitpic.com
    50.97.168.41  web5.twitpic.com
    50.23.200.231 web6.twitpic.com
    50.23.200.232 web7.twitpic.com
    50.23.200.229 web8.twitpic.com
    50.23.200.228 web9.twitpic.com
    174.37.33.172 m1.twitpic.com
    50.23.200.230 twitpic.com
    208.94.0.61   a.yfrog.com
    208.94.0.61   yfrog.com
    208.94.0.61   www.yfrog.com
    #Twitter END
    #Adobe Activation START
    0.0.0.0   3dns-2.adobe.com
    0.0.0.0   3dns-3.adobe.com
    0.0.0.0   activate.adobe.com
    0.0.0.0   activate-sea.adobe.com
    0.0.0.0   activate-sjc0.adobe.com
    0.0.0.0   adobe-dns.adobe.com
    0.0.0.0   adobe-dns-2.adobe.com
    0.0.0.0   adobe-dns-3.adobe.com
    0.0.0.0   ereg.adobe.com
    0.0.0.0   hl2rcv.adobe.com
    0.0.0.0   practivate.adobe.com
    0.0.0.0   wip3.adobe.com
    0.0.0.0   activate.wip3.adobe.com
    0.0.0.0   ereg.wip3.adobe.com
    0.0.0.0   wwis-dubc1-vip60.adobe.com
    #Adobe Activation END
    #YouTube START
    203.208.46.206    accounts.youtube.com
    203.208.46.206    apiblog.youtube.com
    203.208.46.206    help.youtube.com
    203.208.46.206    i.ytimg.com
    203.208.46.206    i1.ytimg.com
    203.208.46.206    i2.ytimg.com
    203.208.46.206    i3.ytimg.com
    203.208.46.206    i4.ytimg.com
    203.208.46.206    insight.youtube.com
    203.208.46.206    m.youtube.com
    203.208.46.206    s.ytimg.com
    203.208.46.206    www.youtube.com
    203.208.46.206    ytimg.l.google.com
    #YouTube END
    #GitHub START
    204.232.175.78    documentcloud.github.com
    207.97.227.239    github.com
    204.232.175.94    gist.github.com
    107.20.136.254    help.github.com
    207.97.227.252    nodeload.github.com
    199.27.76.130 raw.github.com
    107.22.3.110  status.github.com
    204.232.175.78    training.github.com
    207.97.227.243    www.github.com
    #GitHub END
    #Feedly START
    173.194.79.141    feedly-beta.appspot.com
    173.194.74.121    s3.feedly.com
    #Feedly END
    #Others START
    38.229.72.14  www.torproject.org
    #Others END
</code></pre>

<blockquote><p><strong>注意</strong>：当然，也可以自己找ip;方法：<strong>ping</strong>对应的网站，获取相应的ip，能通就可以用&hellip;</p></blockquote>
</div>
  
  


</div>

      </article>
    
    
      <article class="span4">
        <div class="article-format">

  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/10/15/nosqljian-jie/">Nosql简介</a></h1>
    
    
      <p class="meta">
        
  


  
    <span class="byline author vcard">by <span class="fn">TsaiKoga</span></span>
  

 - 
        








  


<time datetime="2013-10-15T13:21:00+08:00" pubdate data-updated="true">Oct 15<span>th</span>, 2013</time> - 
        

posted in
<span class="categories">
  
    <a class='category' href='/blog/categories/nosql/'>nosql</a>
  
</span>


        
      </p>
    
  </header>


  <div class="entry-content"><h4>背景：</h4>

<p>  众所周知，随着社交网络，网络视频，网络游戏的使用，网络资料量呈现爆炸性增长；这时，大数据时代出现。
业界总结出大数据的<strong>四个特点(4V)：Volumn(数据体量大), Velocity(价值密度低), Variety(类型繁多), Veracity(处理速度快)</strong>。</p>

<p>  普通关系数据库不合适处理这样庞大的数据。为了弥补关系型数据库的不足，各种各样的NoSQL数据库应运而生。</p>

<blockquote><p>接下来说说关系数据库的不足：</p>

<p>  因为它毕竟是一个通用型的数据库，并不能完全适应所有的用途。具体来说它并不擅长以下处理：</p>

<ol>
<li>大量数据的写入处理</li>
<li>为有数据更新的表做索引或表结构（schema）变更</li>
<li>字段不固定时应用</li>
<li>对简单查询需要快速返回结果的处理</li>
</ol>
</blockquote>

<hr />

<h4>为什么使用Nosql：</h4>

<p>  Nosql是“<strong>Not Only SQL</strong>”的缩写,它的意义是：适用关系型数据库的时候就使用关系型数据库，不适用的时候也没有必要非使用关系型数据库不可，可以考虑使用更加合适的数据存储。
不像关系型数据库，相对地，NoSQL数据库只应用在<strong>特定领域</strong>，基本上不进行复杂的处理，但它恰恰弥补了之前所列举的关系型数据库的不足之处。</p>

<p> <strong>优点：</strong></p>

<ol>
<li><p>易于分散和处理：</p>

<blockquote><p>关系型数据库并不擅长大量数据的写入处理。
原本关系型数据库就是<strong>以JOIN为前提</strong>的，就是说，各个数据之间存在关联是关系型数据库得名的主要原因。
为了进行JOIN处理，关系型数据库不得不把<strong>数据存储在同一个服务器内</strong>，这不利于数据的分散。</p>

<p>NoSQL数据库原本就<strong>不支持JOIN处理</strong>，各个<strong>数据都是独立设计</strong>的，很容易把数据分散到多个服务器上。
由于数据被分散到了多个服务器上，减少了每个服务器上的数据量，即使要进行大量数据的写入操作，处理起来也更加容易。同理，数据的读入操作当然也同样容易。</p></blockquote></li>
<li><p>提升性能和增大规模：</p>

<blockquote><p>想要使服务器能够轻松地处理更大量的数据：</p>

<ol>
<li><strong>提升性能：</strong>提升性能指的就是通过提升现行服务器自身的性能来提高处理能力。程序方面也不需要进行变更，但需要一些费用。若要购买<strong>性能翻倍</strong>的服务器。</li>
<li><strong>增大规模：</strong>使用<strong>多台廉价的服务器</strong>来提高处理能力。它需要对程序进行变更，但由于使用廉价的服务器，可以控制成本。另外，以后只要依葫芦画瓢增加廉价服务器的数量就可以了。</li>
</ol>
</blockquote></li>
</ol>


<p>注意： <em>NoSQL数据库基本上来说为了“使大量数据的写入处理更加容易（让增加服务器数量更容易）”而设计的。但实际上NoSQL数据库还有各种各样的特点，如果能够恰当地利用这些特点将会是非常有帮助。</em></p>

<hr />

<h3>Nosql数据库：</h3>

<p>  NoSQL的官方网上显示现在的Nosql数据库有122种之多。其中存在着“key-value存储”、“文档型数据库”、“列存储数据库”等种类</p>

<p><img src="/images/posts/2013-10-17/nosql.gif" title="多种nosql数据库" alt="无法显示图片" /></p>

<ul>
<li><p>key-value存储：
<strong>最常见的NoSQL数据库</strong>，它的数据是以<strong>key-value的形式</strong>存储的。虽然它的处理速度非常快，但是基本上只能通过key的完全一致查询获取数据。根据数据的保存方式可以分为临时性、永久性和两者兼具三种。</p>

<ol>
<li><p>临时性：memcached属于这种类型。把所有数据都保存在<strong>内存中</strong></p>

<blockquote><ol>
<li> 在内存中保存数据</li>
<li>可以进行非常快速的保存和读取处理</li>
<li>数据有可能丢失</li>
</ol>
</blockquote></li>
<li><p> 永久性：Tokyo Tyrant、Flare、ROMA等属于这种类型。是把数据保存在<strong>硬盘上</strong>。</p>

<blockquote><ol>
<li>在硬盘上保存数据</li>
<li>可以进行非常快速的保存和读取处理（但无法与memcached相比）</li>
<li>数据不会丢失</li>
</ol>
</blockquote></li>
<li><p> 两者兼具： Redis属于这种类型。</p>

<blockquote><p>Redis<strong>首先把数据保存到内存</strong>中，在满足<strong>特定条件</strong>（默认是15分钟一次以上，5分钟内10个以上，1分钟内10000个以上的key发生变更）的时候将数据<strong>写入到硬盘</strong>中。
这样既确保了内存中数据的处理速度，又可以通过写入硬盘来保证数据的永久性。这种类型的数据库特别适合于处理数组类型的数据。</p>

<ul>
<li>同时在内存和硬盘上保存数据</li>
<li>可以进行非常快速的保存和读取处理</li>
<li>保存在硬盘上的数据不会消失（可以恢复）</li>
<li>适合于处理数组类型的数据</li>
</ul>
</blockquote></li>
</ol>
</li>
<li><p>面向文档的数据库：
  MongoDB、CouchDB属于这种类型。</p>

<p>  不定义表结构：面向文档的数据库具有以下特征：即使<strong>不定义表结构，也可以像定义了表结构一样使用</strong>。
  关系型数据库在<strong>变更表结构时</strong>比较费事，而且为了保持一致性还需修改程序。然而NoSQL数据库则可省去这些麻烦（通常程序都是正确的），确实是方便快捷。
  可以使用<strong>复杂的查询条件</strong>：面向文档的数据库可以通过复杂的查询条件来获取数据。虽然不具备事务处理和JOIN这些关系型数据库所具有的处理能力，但除此以外的其他处理基本上都能实现。这是非常容易使用的NoSQL数据库。</p>

<blockquote><ol>
<li>不需要定义表结构</li>
<li>可以利用复杂的查询条件（不具备事务处理和JOIN）</li>
</ol>
</blockquote></li>
<li><p>面向列的数据库：Cassandra、Hbase、HyperTable属于这种类型。</p>

<blockquote><p>普通的关系型数据库都是以<strong>行为单位</strong>来存储数据的，面向列的数据库是<strong>以列为单位</strong>来存储数据的。</p></blockquote></li>
</ul>


<p><em>注意：NoSQL不是为了替代SQL而出现的，它是一种替补方案，而不是解决方案的首选。</em></p>
</div>
  
  


</div>

      </article>
    
    
      <article class="span4">
        <div class="article-format">

  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/10/15/ubuntuxia-an-zhuang-redis/">Ubuntu下安装redis</a></h1>
    
    
      <p class="meta">
        
  


  
    <span class="byline author vcard">by <span class="fn">TsaiKoga</span></span>
  

 - 
        








  


<time datetime="2013-10-15T10:02:00+08:00" pubdate data-updated="true">Oct 15<span>th</span>, 2013</time> - 
        

posted in
<span class="categories">
  
    <a class='category' href='/blog/categories/nosql/'>nosql</a>
  
</span>


        
      </p>
    
  </header>


  <div class="entry-content"><h4>安装步骤：</h4>

<hr />

<ol>
<li><p><strong>安装并编译redis:</strong></p>

<pre><code> wget http://redis.googlecode.com/files/redis-2.2.13.tar.gz    # 下载压缩包
 tar -zxf redis-2.2.13.tar.gz    # 解压该压缩包
 cd redis-2.2.13
 make                              # 编译
 sudo make install               # 安装redis
</code></pre></li>
</ol>


<blockquote><p><em>由下图自动生成的代码可知：这时Redis 的可执行文件被放到了/usr/local/bin</em></p></blockquote>

<p><img src="/images/posts/2013-10-15/redis1.png" title="生成代码" alt="无法显示图片" /></p>

<ol>
<li><p><strong>拷贝指定配置文件到指定目录：</strong></p>

<pre><code> cp redis.conf /etc/
</code></pre></li>
<li><p><strong>启动服务并验证：</strong></p>

<pre><code> redis-server /etc/redis.conf
</code></pre></li>
<li><p><strong>查看是否成功启动：</strong></p>

<pre><code> ps -ef | grep redis
</code></pre></li>
<li><p><strong>测试set方法和get方法：</strong></p>

<pre><code> $redis-cli
 redis&gt; set foo bar
 OK
 redis&gt; get foo
 "bar"
</code></pre></li>
</ol>


<hr />

<h3>其他设置：</h3>

<h4>设置开机自动启动，关机自动关闭：</h4>

<pre><code>    sudo update-rc.d redis-server defaults
</code></pre>

<h4>初始化用户和日志路径：</h4>

<p>第一次启动Redis前，建议为Redis单独建立一个用户，并新建data和日志文件夹</p>

<pre><code>sudo useradd redis
sudo mkdir -p /var/lib/redis
sudo mkdir -p /var/log/redis
sudo chown redis.redis /var/lib/redis
sudo chown redis.redis /var/log/redis
</code></pre>
</div>
  
  


</div>

      </article>
    
    
      <article class="span4">
        <div class="article-format">

  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/08/30/scroll-to-top/">Scroll to Top</a></h1>
    
    
      <p class="meta">
        
  


  
    <span class="byline author vcard">by <span class="fn">TsaiKoga</span></span>
  

 - 
        








  


<time datetime="2013-08-30T21:57:00+08:00" pubdate data-updated="true">Aug 30<span>th</span>, 2013</time> - 
        

posted in
<span class="categories">
  
    <a class='category' href='/blog/categories/coffeescript/'>coffeescript</a>, <a class='category' href='/blog/categories/web/'>web</a>
  
</span>


        
      </p>
    
  </header>


  <div class="entry-content"><p>许多网页都有提供一个便捷功能：当你浏览网页时，由于网页内容比较多，需要向下滑动；但是，当你要向上时，自己滑动太慢了。这里将的是一个自动向上滑的按钮。
具体操作如下：</p>

<ol>
<li><p>在页面header下写一个&lt;a>标签里面放张图片指着向上。对&lt;a>标签的css设置有几个重要的：position: fixed（表明标签会随着页面处在同一位置）,overflow: hidden</p></li>
<li><p>接着设置js</p></li>
</ol>


<blockquote><ol>
<li>设置它在下拉后显示，具体是看window的scrollTop的位置,如果大于0，则已经开始下拉，所以让&lt;a>标签显示。否则，隐藏。</li>
<li>单击事件，滚到最上层。具体操作：最好用Jquery，设置时间让其向上滑动。如：  $(&lsquo;html, body&rsquo;).animate({scrollTop: 0}, 300)</li>
</ol>
</blockquote>

<p><strong>example:</strong> (标签&lt;a class=&ldquo;go_top&rdquo;>)</p>

<pre><code>    $(document).ready -&gt; 
        $("a.go_top").click () -&gt; 
            $('html, body').animate({scrollTop: 0}, 300)
            return false

        $(window).bind 'scroll resize', -&gt; 
            scroll_from_top = $(window).scrollTop()
            if scroll_from_top &gt;= 1
                $('a.go_top').show()
            else
                $('a.go_top').hide()
</code></pre>
</div>
  
  


</div>

      </article>
    
    
      <article class="span4">
        <div class="article-format">

  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/08/29/redcarpethe-pygmentsjie-he-jin-xing-markdownxian-shi/">Redcarpet和pygments结合进行markdown显示</a></h1>
    
    
      <p class="meta">
        
  


  
    <span class="byline author vcard">by <span class="fn">TsaiKoga</span></span>
  

 - 
        








  


<time datetime="2013-08-29T22:23:00+08:00" pubdate data-updated="true">Aug 29<span>th</span>, 2013</time> - 
        

posted in
<span class="categories">
  
    <a class='category' href='/blog/categories/gem/'>gem</a>
  
</span>


        
      </p>
    
  </header>


  <div class="entry-content"><h2>redcarpet</h2>

<hr />

<p>用于将内容转化成markdown形式进行显示，它提供许多配置，具体操作方式如下：</p>

<p>1.首先是在gemfile中加入redcarpet.</p>

<p>2.安装redcarpet</p>

<pre><code>    gem install redcarpet
</code></pre>

<p>3.以前可直接在要显示的view中加入如下代码:</p>

<pre><code>&lt;%= Redcarpet::Markdown.new(render, :extension =&gt; {})%&gt;
</code></pre>

<p>现在在辅助方法中写如下代码：</p>

<pre><code>def markdown(text)
        require 'redcarpet'
        render = Redcarpet::Render::HTML
        options = {
            autolink: true,
            filter_html: true,
            fenced_code_blocks: true,
    no_intra_emphasis: true
        }
        markdown = Redcarpet::Markdown.new(render.new(hard_wrap: true), options)
        markdown.render(text).html_safe
    end
</code></pre>

<p>4.在view中加入显示markdown的代码:</p>

<pre><code>&lt;%= raw(markdown.render(@post.content).html_safe) %&gt;
</code></pre>

<h2>pygments</h2>

<hr />

<p>可以和redcarpet很好的结合，用于语法高亮设置。
具体代码如下：</p>

<pre><code>    def markdown(text)
            require 'redcarpet'
            render = HTMLwithPygments
            options = {
                    autolink: true, 
                    filter_html: true, 
                    prettify: true,
                    fenced_code_blocks: true,
                    no_intra_emphasis: true
            }
            markdown = Redcarpet::Markdown.new(render.new(hard_wrap: true), options)
            markdown.render(text).html_safe
    end

    class HTMLwithPygments &lt; Redcarpet::Render::HTML
            require 'pygments'
            def block_code(code, language)
                    Pygments.highlight(code, :lexer =&gt; language, :options =&gt; {:linenos =&gt; true})
            end
    end
</code></pre>

<blockquote><h3>注意：</h3>

<ol>
<li>辅助方法要引入文件redcarpet和pygments。</li>
<li>hard_wrap必须Redcarpet::Render::HTML实例化时进行配置。</li>
<li>必须有fenced_code_blocks才能将代码块放入代码框中。</li>
</ol>
</blockquote>

<p>参考：</p>

<ol>
<li><p><a href="https://github.com/vmg/redcarpet">github上的redcarpet</a></p></li>
<li><p><a href="https://github.com/tmm1/pygments.rb">github上的pygments</a></p></li>
<li><p><a href="http://railscasts.com/episodes/272-markdown-with-redcarpet?view=comments">视频参考</a></p></li>
</ol>

</div>
  
  


</div>

      </article>
    
    
      <article class="span4">
        <div class="article-format">

  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/07/28/create-octopress-blog/">Create Octopress Blog</a></h1>
    
    
      <p class="meta">
        
  


  
    <span class="byline author vcard">by <span class="fn">TsaiKoga</span></span>
  

 - 
        








  


<time datetime="2013-07-28T22:51:00+08:00" pubdate data-updated="true">Jul 28<span>th</span>, 2013</time> - 
        

posted in
<span class="categories">
  
    <a class='category' href='/blog/categories/gem/'>gem</a>
  
</span>


        
      </p>
    
  </header>


  <div class="entry-content"><h4>克隆octopress项目</h4>

<pre><code>git clone git://github.com/imathis/octopress.git blog
cd blog
</code></pre>

<p>查看Gemfile文件：
稍作修改，如：source <a href="http://ruby.taobao.org">http://ruby.taobao.org</a></p>

<pre><code>vim Gemfile
</code></pre>

<p>之后执行:</p>

<pre><code>bundle install
</code></pre>

<p>接着要做的事是查看rakefile文件的：</p>

<pre><code>vim Rakefile    # 里面有许多rake任务
</code></pre>

<p>我们执行其中的:</p>

<pre><code>rake install # 复制"theme/"中的"sass/"和"source/"文件夹到"blog/"文件夹下
</code></pre>

<p><strong>查看网页效果：</strong></p>

<pre><code>rake preview
</code></pre>

<p>他会生成public文件夹</p>

<hr />

<h4>创建仓库：名字要以用户名为头，区分大小写。(username.github.io)</h4>

<p>本地执行:</p>

<pre><code>rake setup_github_pages
</code></pre>

<p>在github上新建一个octopress仓库，当要填入url时，不要填入&#8221;.git&#8221;，这样生成的页面才在&#8221;.com&#8221;上,把public生成好的文件变成版本推送到远程仓库github，之后在远程仓库上做开发。
说到在远程仓库做开发，就是将&#8221;开发分支source&#8221;覆盖原有的&#8221;master分支&#8221;。</p>

<pre><code>git checkout source             # 切到开发分支source上
git push origin source      # 推送到远程仓库
</code></pre>

<h4>如果想在source分支下有<em>deploy文件夹(当你的</em>desploy文件夹没了)，只要</h4>

<pre><code>git clone https://github.com/TsaiKoga/tsaikoga.github.com.git
</code></pre>

<p>重新克隆了项目下来，再改变文件夹tsaikoga.github.com/名字为<em>deploy/,
修改</em>config.yml文件中的内容:一定要把url改成/tsaikoga.github.com，</p>

<p>执行：</p>

<pre><code>rake generate
</code></pre>

<p>再执行以下名令，<strong>部署到远程仓库</strong>：</p>

<pre><code>rake deploy
</code></pre>

<p>最后到网址刷新看看。</p>

<hr />

<h4>附加功能：</h4>

<p>注册一个google analytics帐号：
生成tracking_id:</p>

<h4>新建一个博客：</h4>

<pre><code>rake new_post["Hello TsaiKoga"]
</code></pre>

<p>存放到了 source/<em>post 之中, 编辑</em>post文件，如果使用disqus，这里的comment必须填true，下面有原因。</p>

<h4>做评论，可以基于第三方插件：disqus</h4>

<p>扯开一下话题：</p>

<blockquote><p>Disqus的主要目标是通过提供功能强大的第三评论系统，将当前不同网站的相对孤立、隔绝的评论系统，连接成具有社会化特性的大网，用户使用Disqus，在不同网站上评论，无需重复注册账号，只需使用Disqus账号或者<em>第三方平台账号</em>，即可方便的进行评论，且所有评论都会存储、保存在Disqus账号后台，方便随时查看、回顾。</p></blockquote>

<p>可以看到source/<em>layouts/post.html文件中已经有这个插件的评论方法：
在</em>config.yml中加入你申请的disqus的short_name</p>
</div>
  
  


</div>

      </article>
    
    </div>
      <div class="row">
        <ul class="pager">
          
          
        </ul>
      </div>
  </div>
</div>


  <div id="footer-widgets">
  <div class="container">
    <div class="row">
  <div class="span3">
    <h2>recent posts</h2>
    <ul class="recent_posts">
      
        <li>
          <a href="/blog/2013/10/22/railsbiao-de-guan-lian/">Rails表的关联</a>
        </li>
      
        <li>
          <a href="/blog/2013/10/22/vimpei-zhi/">Vim配置</a>
        </li>
      
        <li>
          <a href="/blog/2013/10/22/linuxde-wen-jian-he-mu-lu/">Linux的文件系统</a>
        </li>
      
        <li>
          <a href="/blog/2013/10/19/shi-yong-hostswen-jian-shang-facebookdeng-wang-zhan/">使用hosts文件上facebook等网站</a>
        </li>
      
        <li>
          <a href="/blog/2013/10/15/nosqljian-jie/">Nosql简介</a>
        </li>
      
    </ul>
    <h2><a href="/blog/archives">archives</a></h2>
  </div>
  <div class="span3">
    

  </div>
  <div class="span4">
    

  </div>
  <div class="span2">
    <h2>found on</h2>














  </div>
</div>

  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-left">
  <a href="/">TsaiKoga Blog</a>
  - Copyright &copy; 2013 - TsaiKoga
</p>
<p class="pull-right">
  <span>Powered by <a href="http://octopress.org/">Octopress</a>.</span>
  
    <span>Designed by <a href="http://www.AdrianArtiles.com">Adrian Artiles</a>.</span>
  
</p>

  </div>
</footer>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script>window.jQuery || document.write('<script src="/javascripts/libs/jquery-1.7.2.min.js" type="text/javascript"><\/script>')</script>
<script src="/javascripts/libs/bootstrap.min.js" type="text/javascript"></script>
<script src="/javascripts/jquery.tweet.js" type="text/javascript"></script>
<script src="/javascripts/jquery.instagram.js" type="text/javascript"></script>
<script src="/javascripts/libs/jquery.masonry.min.js" type="text/javascript"></script>
<script src="/javascripts/custom.js" type="text/javascript"></script>


<script type="text/javascript">
      var disqus_shortname = 'tsaikogablog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




</body>
</html>
